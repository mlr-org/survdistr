<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Survival Distribution Containers • survdistr</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Survival Distribution Containers">
<meta name="description" content="Efficient containers for storing and managing prediction outputs from survival models, including Cox proportional hazards, random survival forests, and modern machine learning estimators. Provides fast methods to evaluate survival probabilities, hazards, probability densities, and related quantities at given time points, with support for multiple interpolation methods.">
<meta property="og:description" content="Efficient containers for storing and managing prediction outputs from survival models, including Cox proportional hazards, random survival forests, and modern machine learning estimators. Provides fast methods to evaluate survival probabilities, hazards, probability densities, and related quantities at given time points, with support for multiple interpolation methods.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">survdistr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/survdistr" aria-label="GitHub"><span class="fa fab fa-github"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="survdistr">survdistr<a class="anchor" aria-label="anchor" href="#survdistr"></a>
</h1></div>
<p>⚠️ <strong>Under Development</strong><br>
This package is experimental and not yet intended for general use.<br>
APIs may change without notice, and functionality is incomplete.<br>
Please use only for testing and development purposes.</p>
<p>Survival distribution containers for efficient storage, management, and evaluation of survival model predictions.</p>
<!-- badges: start -->

<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the development version from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"mlr-org/survdistr"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Linear interpolation of a survival matrix using the <code>survDistr</code> R6 class:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://survdistr.mlr-org.com">survdistr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># generate survival matrix</span></span>
<span><span class="va">mat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">0.6</span>,<span class="fl">0.4</span>,<span class="fl">0.8</span>,<span class="fl">0.8</span>,<span class="fl">0.7</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span>,</span>
<span>             ncol <span class="op">=</span> <span class="fl">3</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">=</span> <span class="va"><a href="reference/survDistr.html">survDistr</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>x <span class="op">=</span> <span class="va">mat</span>, times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">34</span>, <span class="fl">42</span><span class="op">)</span>, interp_meth <span class="op">=</span> <span class="st">"linear_surv"</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="do">## A [2 x 3] survival matrix</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="do">## Number of observations: 2</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="do">## Number of time points: 3</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="do">## Interpolation method: Piece-wise Linear Survival</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># stored survival matrix</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">data</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="do">##       12  34  42</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="do">## [1,] 1.0 0.6 0.4</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="do">## [2,] 0.8 0.8 0.7</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># S(t) at given time points (linear interpolation)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">survival</span><span class="op">(</span>times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">30</span>, <span class="fl">42</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="do">##              5        30  42  50</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="do">## [1,] 1.0000000 0.6727273 0.4 0.2</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="do">## [2,] 0.9166667 0.8000000 0.7 0.6</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Cumulative hazard H(t)</span></span>
<span><span class="va">x</span><span class="op">$</span><span class="fu">cumhazard</span><span class="op">(</span>times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">5</span>, <span class="fl">5</span>, <span class="fl">42</span><span class="op">)</span><span class="op">)</span> <span class="co"># times can be unordered or duplicated</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="do">##             50          5          5        42</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="do">## [1,] 1.6094379 0.00000000 0.00000000 0.9162907</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="do">## [2,] 0.5108256 0.08701138 0.08701138 0.3566749</span></span></code></pre></div>
<p>Interpolation of a Kaplan-Meier survival curve using exported R function that calls C code:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/survfit.html" class="external-link">survfit</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>, data <span class="op">=</span> <span class="va">veteran</span><span class="op">)</span></span>
<span><span class="va">tab</span> <span class="op">=</span> <span class="fu">data.table</span><span class="op">(</span>time <span class="op">=</span> <span class="va">fit</span><span class="op">$</span><span class="va">time</span>, surv <span class="op">=</span> <span class="va">fit</span><span class="op">$</span><span class="va">surv</span><span class="op">)</span></span>
<span><span class="va">tab</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="do">##       time        surv</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="do">##      &lt;num&gt;       &lt;num&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="do">##   1:     1 0.985401460</span></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="do">##   2:     2 0.978102190</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="do">##   3:     3 0.970802920</span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="do">##   4:     4 0.963503650</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="do">##   5:     7 0.941605839</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="do">##  ---                  </span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="do">##  97:   467 0.036018043</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="do">##  98:   553 0.027013532</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="do">##  99:   587 0.018009021</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="do">## 100:   991 0.009004511</span></span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="do">## 101:   999 0.000000000</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># constant S(t) interpolation</span></span>
<span><span class="fu"><a href="reference/vec_interp.html">vec_interp</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">tab</span><span class="op">$</span><span class="va">surv</span>, </span>
<span>  times <span class="op">=</span> <span class="va">tab</span><span class="op">$</span><span class="va">time</span>, </span>
<span>  eval_times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3.5</span>, <span class="fl">995</span>, <span class="fl">1000</span><span class="op">)</span>,</span>
<span>  constant <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"surv"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="do">##           0         3.5         995        1000 </span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="do">## 1.000000000 0.970802920 0.009004511 0.000000000</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># linear S(t) interpolation</span></span>
<span><span class="fu"><a href="reference/vec_interp.html">vec_interp</a></span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="va">tab</span><span class="op">$</span><span class="va">surv</span>, </span>
<span>  times <span class="op">=</span> <span class="va">tab</span><span class="op">$</span><span class="va">time</span>, </span>
<span>  eval_times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">3.5</span>, <span class="fl">995</span>, <span class="fl">1000</span><span class="op">)</span>,</span>
<span>  constant <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"surv"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="do">##           0         3.5         995        1000 </span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="do">## 1.000000000 0.967153285 0.004502255 0.000000000</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="code-of-conduct">Code of Conduct<a class="anchor" aria-label="anchor" href="#code-of-conduct"></a>
</h2>
<p>Please note that the survdistr project is released with a <a href="https://survdistr.mlr-org.com/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing survdistr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>John Zobolas <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mlr-org/mlr3survival/actions/workflows/r-cmd-check.yml" class="external-link"><img src="https://github.com/mlr-org/survdistr/actions/workflows/r-cmd-check.yml/badge.svg" alt="r-cmd-check"></a></li>
<li><a href="https://app.codecov.io/gh/mlr-org/survdistr?branch=main" class="external-link"><img src="https://codecov.io/gh/mlr-org/survdistr/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by John Zobolas.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
